---  
- name: Add jenkins repository key
  apt_key: 
    url='http://pkg.jenkins-ci.org/debian/jenkins-ci.org.key'
    state=present
- name: Add jenkins repository
  apt_repository: 
    repo='deb http://pkg.jenkins-ci.org/debian binary/'
    update_cache=yes
- name: Install jenkins
  apt: 
    name=jenkins
    state=present
- name: Change jenkins server name
  lineinfile: dest=/etc/default/jenkins
              regexp="NAME="
              line="NAME=jenkins"
#- name: Change jenkins url prefix
#  lineinfile: dest=/etc/default/jenkins
#              regexp="PREFIX="
#              line="PREFIX=/$NAME"
- name: Change jenkins server port
  lineinfile: dest=/etc/default/jenkins
              regexp="HTTP_PORT="
              line="HTTP_PORT=9010"
- name: Change jenkins server arguments
  lineinfile: dest=/etc/default/jenkins
              regexp="JENKINS_ARGS="
              line="JENKINS_ARGS=\"--webroot=/var/cache/$NAME/war --httpPort=$HTTP_PORT --ajp13Port=$AJP_PORT --prefix=$PREFIX\""
- name: Restart jenkins
  service: name=jenkins state=restarted
